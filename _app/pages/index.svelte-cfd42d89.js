import{S as ue,i as fe,s as _e,N as z,O as D,a as q,d as M,b as g,g as C,P as I,Q as me,t as de,h as ge,f as te,G as ye,j as pe,k as X,m as Y,H as le,R as Q,T as xe,U,V as W,W as ve,X as $e,Y as Me,Z as ke,e as re,w as Z,c as ne,x as A,y as F,q as J,o as K,B as ee,_ as we}from"../chunks/vendor-47625316.js";function be(){let t=[],e=[],s=1,l=1;const c=5,_=.5,i=.2,h=1,d=30,m=30,b=3;function y(o,r,f){let k=r.length,p=0,u=r[o].x-f[o].x,x=f[o].y-r[o].y,w=Math.sqrt(u*u+x*x),T=!0;w>0&&(p+=w*i),u/=w,x/=w,u>0&&x>0?p+=0*b:u<0&&x>0?p+=1*b:u<0&&x<0?p+=2*b:p+=3*b;let j=r[o].x,S=r[o].y-r[o].height+2,V=r[o].x+r[o].width,H=r[o].y+2,L,R,B,G,N,O,P;for(let v=0;v<k;v++)v!=o&&(T=a(f[o].x,r[o].x,f[v].x,r[v].x,f[o].y,r[o].y,f[v].y,r[v].y),T&&(p+=h),L=r[v].x,B=r[v].y-r[v].height+2,R=r[v].x+r[v].width,G=r[v].y+2,N=Math.max(0,Math.min(R,V)-Math.max(L,j)),O=Math.max(0,Math.min(G,H)-Math.max(B,S)),P=N*O,p+=P*d),L=f[v].x-f[v].r,B=f[v].y-f[v].r,R=f[v].x+f[v].r,G=f[v].y+f[v].r,N=Math.max(0,Math.min(R,V)-Math.max(L,j)),O=Math.max(0,Math.min(G,H)-Math.max(B,S)),P=N*O,p+=P*m;return p}function n(o){let r=Math.floor(Math.random()*t.length),f=t[r].x,k=t[r].y,p=y(r,t,e);t[r].x+=(Math.random()-.5)*c,t[r].y+=(Math.random()-.5)*c,t[r].x>s&&(t[r].x=f),t[r].x<0&&(t[r].x=f),t[r].y>l&&(t[r].y=k),t[r].y<0&&(t[r].y=k);let x=y(r,t,e)-p;Math.random()<Math.exp(-x/o)||(t[r].x=f,t[r].y=k)}function $(o){let r=Math.floor(Math.random()*t.length),f=t[r].x,k=t[r].y,p=y(r,t,e),u=(Math.random()-.5)*_,x=Math.sin(u),w=Math.cos(u);t[r].x-=e[r].x,t[r].y-=e[r].y;let T=t[r].x*w-t[r].y*x,j=t[r].x*x+t[r].y*w;t[r].x=T+e[r].x,t[r].y=j+e[r].y,t[r].x>s&&(t[r].x=f),t[r].x<0&&(t[r].x=f),t[r].y>l&&(t[r].y=k),t[r].y<0&&(t[r].y=k);let V=y(r,t,e)-p;Math.random()<Math.exp(-V/o)||(t[r].x=f,t[r].y=k)}function a(o,r,f,k,p,u,x,w){let T,j,S,V,H;return S=(w-x)*(r-o)-(k-f)*(u-p),V=(k-f)*(p-x)-(w-x)*(o-f),H=(r-o)*(p-x)-(u-p)*(o-f),T=V/S,j=H/S,!(T<0||T>1||j<0||j>1)}function E(o,r,f){return o-r/f}return{start(o){let r=t.length,f=1,k=1;for(let p=0;p<o;p++){for(let u=0;u<r;u++)Math.random()<.5?n(f):$(f);f=E(f,k,o)}return this},width(o){return arguments.length?(s=o,this):s},height(o){return arguments.length?(l=o,this):l},label(o){return arguments.length?(t=o,this):t},anchor(o){return arguments.length?(e=o,this):e}}}function ae(t,e,s){const l=t.slice();return l[18]=e[s],l}function se(t,e,s){const l=t.slice();return l[18]=e[s],l}function oe(t,e,s){const l=t.slice();return l[23]=e[s],l}function ie(t){let e,s;return{c(){e=z("path"),this.h()},l(l){e=D(l,"path",{d:!0,fill:!0,stroke:!0,"stroke-opacity":!0}),q(e).forEach(M),this.h()},h(){g(e,"d",s=t[5](t[23])),g(e,"fill","none"),g(e,"stroke","black"),g(e,"stroke-opacity","0.25")},m(l,c){C(l,e,c)},p(l,c){c&1&&s!==(s=l[5](l[23]))&&g(e,"d",s)},d(l){l&&M(e)}}}function ce(t){let e,s,l,c,_,i;function h(){return t[14](t[18])}return{c(){e=z("circle"),this.h()},l(d){e=D(d,"circle",{class:!0,cx:!0,cy:!0,r:!0,fill:!0}),q(e).forEach(M),this.h()},h(){g(e,"class","node"),g(e,"cx",s=t[18].y),g(e,"cy",l=t[18].x),g(e,"r","7.5"),g(e,"fill",c=t[18].children?"lightpink":"blue")},m(d,m){C(d,e,m),_||(i=[I(e,"mouseover",t[12]),I(e,"mouseout",t[13]),I(e,"focus",Te),I(e,"blur",Ce),I(e,"click",h)],_=!0)},p(d,m){t=d,m&1&&s!==(s=t[18].y)&&g(e,"cx",s),m&1&&l!==(l=t[18].x)&&g(e,"cy",l),m&1&&c!==(c=t[18].children?"lightpink":"blue")&&g(e,"fill",c)},d(d){d&&M(e),_=!1,me(i)}}}function he(t){let e,s=t[18].data.name+"",l,c,_;return{c(){e=z("text"),l=de(s),this.h()},l(i){e=D(i,"text",{class:!0,dy:!0,dx:!0,transform:!0,style:!0});var h=q(e);l=ge(h,s),h.forEach(M),this.h()},h(){g(e,"class","label"),g(e,"dy",".35em"),g(e,"dx",c=t[18].data.children?"-.75em":".75em"),g(e,"transform",_="translate("+t[18].y+", "+t[18].x+")"),te(e,"text-anchor",t[18].data.children?"end":"start")},m(i,h){C(i,e,h),ye(e,l)},p(i,h){h&1&&s!==(s=i[18].data.name+"")&&pe(l,s),h&1&&c!==(c=i[18].data.children?"-.75em":".75em")&&g(e,"dx",c),h&1&&_!==(_="translate("+i[18].y+", "+i[18].x+")")&&g(e,"transform",_),h&1&&te(e,"text-anchor",i[18].data.children?"end":"start")},d(i){i&&M(e)}}}function Ee(t){let e,s,l,c,_,i=t[0].links(),h=[];for(let n=0;n<i.length;n+=1)h[n]=ie(oe(t,i,n));let d=t[0].descendants(),m=[];for(let n=0;n<d.length;n+=1)m[n]=ce(se(t,d,n));let b=t[0].descendants(),y=[];for(let n=0;n<b.length;n+=1)y[n]=he(ae(t,b,n));return{c(){e=z("g");for(let n=0;n<h.length;n+=1)h[n].c();s=X(),l=z("g");for(let n=0;n<m.length;n+=1)m[n].c();c=X(),_=z("g");for(let n=0;n<y.length;n+=1)y[n].c();this.h()},l(n){e=D(n,"g",{class:!0});var $=q(e);for(let o=0;o<h.length;o+=1)h[o].l($);$.forEach(M),s=Y(n),l=D(n,"g",{class:!0});var a=q(l);for(let o=0;o<m.length;o+=1)m[o].l(a);a.forEach(M),c=Y(n),_=D(n,"g",{class:!0});var E=q(_);for(let o=0;o<y.length;o+=1)y[o].l(E);E.forEach(M),this.h()},h(){g(e,"class","links"),g(l,"class","nodes"),g(_,"class","labels")},m(n,$){C(n,e,$);for(let a=0;a<h.length;a+=1)h[a].m(e,null);C(n,s,$),C(n,l,$);for(let a=0;a<m.length;a+=1)m[a].m(l,null);C(n,c,$),C(n,_,$);for(let a=0;a<y.length;a+=1)y[a].m(_,null)},p(n,[$]){if($&33){i=n[0].links();let a;for(a=0;a<i.length;a+=1){const E=oe(n,i,a);h[a]?h[a].p(E,$):(h[a]=ie(E),h[a].c(),h[a].m(e,null))}for(;a<h.length;a+=1)h[a].d(1);h.length=i.length}if($&17){d=n[0].descendants();let a;for(a=0;a<d.length;a+=1){const E=se(n,d,a);m[a]?m[a].p(E,$):(m[a]=ce(E),m[a].c(),m[a].m(l,null))}for(;a<m.length;a+=1)m[a].d(1);m.length=d.length}if($&1){b=n[0].descendants();let a;for(a=0;a<b.length;a+=1){const E=ae(n,b,a);y[a]?y[a].p(E,$):(y[a]=he(E),y[a].c(),y[a].m(_,null))}for(;a<y.length;a+=1)y[a].d(1);y.length=b.length}},i:le,o:le,d(n){n&&M(e),Q(h,n),n&&M(s),n&&M(l),Q(m,n),n&&M(c),n&&M(_),Q(y,n)}}}const Te=()=>{},Ce=()=>{};function je(t,e,s){let l,c,_,i,h,d,m,b;const{data:y,width:n,height:$}=xe("LayerCake");U(t,y,u=>s(11,b=u)),U(t,n,u=>s(10,m=u)),U(t,$,u=>s(9,d=u));function a(u,x,w){const T=$e(u);return Me().size([x,w])(T),T}function E(u,x,w){return i.label()}const o=W("#tooltip").style("opacity",0).attr("class","tooltip").style("background-color","white").style("border","solid").style("border-width","2px").style("border-radius","5px").style("padding","5px"),r=ve().source(u=>[u.source.y,u.source.x]).target(u=>[u.target.y,u.target.x]),f=function(){o.style("opacity",1),W(this).attr("r",10)},k=function(){o.style("opacity",0),W(this).attr("r",7.5)},p=u=>console.log(u);return t.$$.update=()=>{t.$$.dirty&1024&&s(8,l=m-100),t.$$.dirty&512&&s(7,c=d-100),t.$$.dirty&2432&&s(0,_=a(b,c,l)),t.$$.dirty&1&&console.log(_.descendants()),t.$$.dirty&1537&&(i=be().label(_.descendants().map(u=>{const x=u.x,w=u.y;return{name:u.data.name,x,y:w,org_x:x,org_y:w,width:100,height:100}})).anchor(_.descendants().map(u=>({x:u.x,y:u.y,r:0}))).width(m).height(d).start(1500)),t.$$.dirty&385&&s(6,h=E(_.descendants())),t.$$.dirty&64&&console.log(h)},[_,y,n,$,o,r,h,c,l,d,m,b,f,k,p]}class qe extends ue{constructor(e){super();fe(this,e,je,Ee,_e,{})}}function Se(t){let e,s;return e=new qe({}),{c(){Z(e.$$.fragment)},l(l){A(e.$$.fragment,l)},m(l,c){F(e,l,c),s=!0},i(l){s||(J(e.$$.fragment,l),s=!0)},o(l){K(e.$$.fragment,l),s=!1},d(l){ee(e,l)}}}function Ve(t){let e,s;return e=new we({props:{$$slots:{default:[Se]},$$scope:{ctx:t}}}),{c(){Z(e.$$.fragment)},l(l){A(e.$$.fragment,l)},m(l,c){F(e,l,c),s=!0},p(l,c){const _={};c&2&&(_.$$scope={dirty:c,ctx:l}),e.$set(_)},i(l){s||(J(e.$$.fragment,l),s=!0)},o(l){K(e.$$.fragment,l),s=!1},d(l){ee(e,l)}}}function ze(t){let e,s,l,c,_;return c=new ke({props:{data:t[0],$$slots:{default:[Ve]},$$scope:{ctx:t}}}),{c(){e=re("div"),s=X(),l=re("div"),Z(c.$$.fragment),this.h()},l(i){e=ne(i,"DIV",{id:!0,class:!0});var h=q(e);h.forEach(M),s=Y(i),l=ne(i,"DIV",{class:!0});var d=q(l);A(c.$$.fragment,d),d.forEach(M),this.h()},h(){g(e,"id","tooltip"),g(e,"class","grid mx-32 h-1/6 justify-start align-bottom"),g(l,"class","grid mx-32 h-5/6")},m(i,h){C(i,e,h),C(i,s,h),C(i,l,h),F(c,l,null),_=!0},p(i,[h]){const d={};h&1&&(d.data=i[0]),h&2&&(d.$$scope={dirty:h,ctx:i}),c.$set(d)},i(i){_||(J(c.$$.fragment,i),_=!0)},o(i){K(c.$$.fragment,i),_=!1},d(i){i&&M(e),i&&M(s),i&&M(l),ee(c)}}}function De(t,e,s){let{data:l}=e;return t.$$set=c=>{"data"in c&&s(0,l=c.data)},[l]}class Ie extends ue{constructor(e){super();fe(this,e,De,ze,_e,{data:0})}}export{Ie as default};
